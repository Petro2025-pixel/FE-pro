<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Homework18_1</title>
    <link rel="stylesheet" href="./style18_1.css" />
  </head>
  <body>
    <div class="container wrapper">
      <h1>Таймер відліку</h1>
      <div id="clock">01:25</div>
      <button id="start" class="button_start">Start</button>
      <button id="stop" class="button_stop">Stop</button>
    </div>
    <script>
      function Timer(targetElementId, initialMinutes, initialSeconds) {
        const element = document.getElementById(targetElementId);
        let isRunning = false;
        let intervalId;

        let timeRemaining = (initialMinutes * 60 + initialSeconds) * 1000;

        const updateClock = () => {
          if (isRunning) {
            if (timeRemaining < 1000) {
              this.stop();
              element.textContent = "00:00";
              return;
            }

            timeRemaining = timeRemaining - 1000;

            const totalSeconds = Math.floor(timeRemaining / 1000);
            const minutes = Math.floor(totalSeconds / 60)
              .toString()
              .padStart(2, "0");
            const seconds = (totalSeconds % 60).toString().padStart(2, "0");

            element.textContent = `${minutes}:${seconds}`;
          }
        };

        this.start = function () {
          if (!isRunning) {
            isRunning = true;
            updateClock();
            intervalId = setInterval(updateClock, 1000);
          }
        };

        this.stop = function () {
          if (isRunning) {
            isRunning = false;
            clearInterval(intervalId);
          }
        };
      }

      const initialMinutes = 1;
      const initialSeconds = 25;
      const myClock = new Timer("clock", initialMinutes, initialSeconds);

      document.getElementById("start").addEventListener("click", myClock.start);
      document.getElementById("stop").addEventListener("click", myClock.stop);
    </script>
  </body>
</html>
